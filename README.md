
> â­åŸºäºgité¡¹ç›®äºŒæ¬¡å¼€å‘: https://github.com/zjcscut/octopusâ­

##!!!è¯·è§‚çœ‹ğŸ‘†é¡¹ç›®åå†çœ‹æœ¬æ–‡!!!

å½“ä½œä¸ºå®é™…ä½¿ç”¨è¿˜æ˜¯æœ‰ç‚¹ä¸å¤Ÿ:
æ•´ä½“è®¾è®¡:
1. redisåšäº†ç¼“å­˜,æ²¡æœ‰ç”¨åˆ°å¸ƒéš†è¿‡æ»¤å™¨
2. rabbitå¼‚æ­¥å…¥åº“è®¿é—®è®°å½•
3. Schedulingå®šæ—¶ä»»åŠ¡åšäº†ç»Ÿè®¡

ç¼ºç‚¹:
1. ç”Ÿæˆå’Œç»Ÿè®¡çš„æ•°æ®ç¼ºå°‘ä¸šåŠ¡æ ‡è¯†(æ ¹æ®ä¸šåŠ¡åˆ’åˆ†çŸ­é“¾)
2. ç”ŸæˆçŸ­é“¾æ–¹æ¡ˆå¯ä»¥ä¼˜åŒ–,å®ƒæ˜¯é æ•°æ®åº“å”¯ä¸€æ€§çº¦æŸç¢°æ’(ç¢°æ’æ¦‚ç‡ä¸ä¼šå¤ªå¤§)


### çŸ­é“¾é—®é¢˜
1. å¾®åšå’ŒTwitteréƒ½æœ‰140å­—æ•°çš„é™åˆ¶ï¼Œå¦‚æœåˆ†äº«ä¸€ä¸ªé•¿ç½‘å€ï¼Œå¾ˆå®¹æ˜“å°±è¶…å‡ºé™åˆ¶ã€‚
2. è¥é”€çŸ­ä¿¡ï¼Œå­—æ•°çš„é™åˆ¶,å½“å­—æ•°è¿‡é•¿: 1.ä¸ç¾è§‚ 2.è¶…å‡ºå­—ç¬¦é¢å¤–æ”¶è´¹ã€‚
3. ç”ŸæˆäºŒç»´ç çš„åŸå§‹é“¾æ¥,å½“åŸå§‹é“¾æ¥è¿‡é•¿æ—¶,ç”Ÿæˆçš„äºŒç»´ç è¿‡äºå¤æ‚,å¯¼è‡´ä¸€äº›åƒç´ è¾ƒä½çš„æ‰‹æœºæ— æ³•æ‰«æ.


### ç›®æ ‡ç»“æœ
1. é«˜æ€§èƒ½
2. åˆç†é•¿åº¦
3. è®¿é—®ç»Ÿè®¡

###  æ ¸å¿ƒè®¾è®¡

**å¯¹äºè¿›å…¥ç³»ç»Ÿçš„è¯·æ±‚ç»è¿‡å¤„ç†åæ”¹å†™Responseæµé‡å®šå‘åˆ°æŒ‡å®šç½‘(ç³»ç»Ÿåªåšè½¬å‘å’Œä¸€äº›è¿‡æ»¤åŠŸèƒ½)**

##### 1. è½¬æ¢
æœ€æ™®éä¹Ÿæ˜¯æœ€å¥½ç”¨çš„æ–¹æ¡ˆå°±æ˜¯é«˜è¿›åˆ¶è½¬æ¢,é€šå¸¸ä»¥a-z A-Z 0-9ä½œä¸ºè¿›åˆ¶è½¬æ¢(62ä¸ªå­—ç¬¦)

> 111->(è½¬æ¢è¿›åˆ¶)oNWxUYwrXdCOIj4ck6M8RbiQa3H91pSmZTAh70zquLnKvt2VyEGlBsPJgDe5Ff=>cb

é€šå¸¸æ¥è¯´çŸ­é“¾æˆ‘ä»¬ä¸éœ€è¦å…·å¤‡å¯è¯»æ€§,ä»¥è¶ŠçŸ­è¶Šå¥½è€Œå­˜åœ¨,å¦‚ç§»åŠ¨çš„4ä½ã€ç¾å›¢12,åœ¨ä¸è€ƒè™‘çŸ­é“¾æ¥å›æ”¶,6ä½åº”è¯¥æ˜¯æ¯”è¾ƒåˆç†çš„å­˜åœ¨,è€Œç¾å›¢çš„12ä¸ºåº”è¯¥æ˜¯ç›´æ¥ç”¨é›ªèŠ±è¿›è¡Œé«˜è¿›åˆ¶è½¬æ¢ç›´æ¥ä½¿ç”¨ã€‚
> N = 4ï¼Œç»„åˆæ•°ä¸º62 ^ 4 = 14_776_336ï¼Œ147ä¸‡æ¥è¿‘148ä¸‡
N = 5ï¼Œç»„åˆæ•°ä¸º62 ^ 5 = 916_132_832ï¼Œ9.16äº¿å·¦å³
N = 6ï¼Œç»„åˆæ•°ä¸º62 ^ 6 = 56_800_235_584ï¼Œ568äº¿å·¦å³
N = 12ï¼Œç»„åˆæ•°ä¸º62 ^ 12 = 3,226,266,762,397,899,821,056ï¼Œ3,226,266,762,397äº¿å·¦å³
>ä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯è¿™ç§è®¡ç®—æ–¹æ³•æ˜¯:1ä½-4ä½æœ‰147ä¸‡ã€1ä½-6ä½æœ‰58äº¿
>å¦‚æœå¸Œæœ›å§‹ç»ˆä¿æŒåœ¨6ä½é‚£åº”è¯¥æ˜¯568äº¿-9.16äº¿ = 558äº¿-ç»°ç»°æœ‰ä½™

è½¬æ¢æ–¹æ¡ˆå‘¢? ä¸å¾—æä¾›ä¸€ä¸ªæ•°å€¼æ¯”å¦‚ç”¨ä¸»é”®ã€é›ªèŠ±ç®—æ³•å»å‚ä¸åˆ°è½¬æ¢ä¸­?
ç›®å‰å¤šæ•°æ˜¯ä½¿ç”¨çš„é›ªèŠ±ç®—æ³•ç„¶åç»™äºˆä¸€å®šçš„å‹ç¼©æˆ–è€…è£å‰ª,ç¬”è€…åŸºäºçš„é¡¹ç›®ä¹Ÿæ˜¯è¿™ç§æ–¹æ¡ˆ
ä½†æ˜¯äº†è§£é›ªèŠ±ç®—æ³•çš„åŒå­¦åº”è¯¥çŸ¥é“**é›ªèŠ±ç®—æ³•æœ‰ä¸¤ä¸ªç¼ºé™·**
1. éœ€è¦è®¾ç½®workerIdå’ŒdataCenterId(å½“ç„¶ç¾å›¢Leafå¯ä»¥è§£å†³)
2. é›ªèŠ±ç”Ÿæˆçš„æ˜¯å®šé•¿,åç»­éœ€è¦äºŒæ¬¡å‹ç¼©,æ— æ³•é¿å…ç¢°æ’

> é›ªèŠ±ç®—æ³•å›ºå®šç”Ÿæˆ19ä½æ•°å­—(6980725272719003680)ç»è¿‡62è¿›åˆ¶å‹ç¼©å11ä½(X8LEbYzwI8w)

ä½¿ç”¨å¸¸è§**ä¸»é”®æœ‰ä¸€ä¸ªä¸¥é‡**
1. è¿‡äºé¢‘ç¹çš„å¯¹æ•°æ®åº“æ“ä½œ

> redisè‡ªå¢å°±ä¸è®²å•¦,ä¸¢å¤±åå°±å¤ªéš¾å¤„ç†äº†

**ç¬”è€…æ¨èæ–¹æ¡ˆ:**
åŸºäºæ•°æ®åº“ç”³è¯·ä¸€æ‰¹æ¬¡çš„**ä¸»é”®**(åº”è¯¥å«åšç¼–å·), å¦‚ä¸€ä¸ªä¸šåŠ¡æ ‡è¯†ä½çš„10çš„,ç”³è¯·äº†ä¸€æ‰¹10000-11000çš„ä¸»é”®,é‚£æœ¬æ‰¹ä¸»é”®å°±å·²ç»è¢«å ç”¨äº†,è¯¥æ–¹æ³•é¿å…äº†ä½¿ç”¨æ’å…¥è‡ªå¢çš„æ–¹å¼å¸¦æ¥çš„æ•°æ®åº“å‹åŠ›,æ•°æ®åº“çš„é¢‘ç‡ä»1å‡å°åˆ°äº†1/step
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/71c9593695464f25beebad1f8d341f33.png)

> å¯¹äºå ç”¨çš„ä¸»é”®èŒƒå›´åªåœ¨å†…å­˜ä¸­,å³ä½¿ä¸¢å¤±äº†ä¸‹æ¬¡ç”³è¯·å³å¯

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/484b35b98355462f93584abcc86697d1.png)
ä½†æ˜¯å¯¹äºè¿™ç§æ–¹å¼å–åˆ°çš„ä¸»é”®æœ‰ä¸€ä¸ªç¼ºç‚¹,å¦‚1-1000ç”Ÿæˆå‡ºæ¥çš„ä¸€åƒä¸ªçŸ­é“¾æ¥ç å¦‚æœæ²¡æœ‰ç»è¿‡å¤„ç†ä¼šå˜æˆéå›ºå®šé•¿åº¦,å¤§æ¦‚ç‡åªä¼šæ˜¯1ä½æˆ–è€…ä¸¤ä½çš„é•¿åº¦,å½“ç„¶åœ¨åŠ ä¸Šä¸€äº›å¡«å……ç æˆ–è€…è®¾ç½®èµ·å§‹ç¼–å·å°±å¯ä»¥åˆç†è§£å†³(ä»)

> 1=>a
> 2=>b
> 3=>c
56,800,235,584

##### 2. å­˜å‚¨

> æˆ‘ä»¬éœ€è¦è®°å½•è¯·æ±‚è®°å½•ä»¥ç”¨äºåç»­è®°å½•pv uvç­‰æ•°æ®
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://img-blog.csdnimg.cn/34ef03037c5541dc9440d37e710e9e8b.png)

######  2.1 åŸºäºMQ

> åŸºäºMQçš„æ–¹æ¡ˆæ˜¯æœ€ä¼˜ç§€çš„å¼‚æ­¥ã€å®‰å…¨ã€‚ä½†å¯¹äºä¸€ä¸ªåŸºç¡€ç³»ç»Ÿå¼•å…¥MQä¼šä½¿å…¶åºå¤§ã€é‡ã€‚ä¹Ÿæœ‰è®¸å¤šå…¬å¸MQå¹¶ä¸æ˜¯ä¸»è¦æ–¹æ¡ˆ

######  2.2 åŒæ­¥è®°å½•DB

> åŸºäºDBç›´æ¥è®°å½•å®‰å…¨ä½†æ€§èƒ½æ‰“æŠ˜å¤§åŠï¼Œæœ¬æ¥åªè¦åšä¸€äº›åŸºäºredisçš„è¿‡æ»¤æ“ä½œï¼Œå¼•å…¥DBåæ•´ä¸ªç³»ç»Ÿä¼šå˜çš„ç¼“æ…¢ã€‚

######  2.2 å¼‚æ­¥è®°å½•DB-é»˜è®¤ä½¿ç”¨

> åœ¨Spring2.3åï¼Œæ¡†æ¶çš„å…³é—­å˜çš„ä¼˜é›…ï¼Œä½¿å…¶åœ¨æœ¬æœºå¼‚æ­¥æ‰¹é‡è®°å½•æœ‰ä¸€å®šå¯èƒ½ï¼ŒåŒæ—¶ä¹Ÿæ˜¯å› ä¸ºè®¿é—®è®°å½•ä¸¢å¤±å‡ æ¡é—®é¢˜ä¸å¤§çš„å‰æä¸‹
> å…¼é¡¾è½»ä¾¿ã€æ€§èƒ½

å…·ä½“æŸ¥çœ‹:https://blog.csdn.net/qq_35040959/article/details/127464968

```java
    //è®¿é—®è®°å½•
    private final LinkedBlockingQueue<TransformEvent> linkedBlockingQueue = new LinkedBlockingQueue(Integer.MAX_VALUE);

    @Override
    public void start() {
        ScheduledExecutorService scheduledExecutorService = Executors.newScheduledThreadPool(1);
        //å®¹å™¨å…³é—­ç›‘å¬-å¤„ç†æœªè®°å½•çš„è®¿é—®è®°å½•
        springShutdownEventListening.setListening(execTask);
        //æ¯0.2ç§’å¤„ç†ä¸€æ¬¡æ‰¹ä»»åŠ¡
        scheduledExecutorService.scheduleWithFixedDelay(execTask, 200, 200, TimeUnit.MILLISECONDS);
    }
```
##### 3. åŠŸèƒ½
1. å“åº”å¼æ¡†æ¶
2. é»‘åå•æ‹¦æˆª
3. è®¿é—®åŸŸåæ‹¦æˆª
4. ç™½åå•apié…ç½®
5. redisç¼“å­˜
6. pvuvç­‰æŠ¥è¡¨è®°å½•
7. mqå¼‚æ­¥è®°å½•è®¿é—®-å¯é€‰
8. æœ¬åœ°å¼‚æ­¥è®°å½•è®¿é—®-å¯é€‰-é»˜è®¤
9. ä¸é‡å¤é«˜æ€§èƒ½å‹ç¼©ç -å¯é€‰-é»˜è®¤
10. æœ¬åœ°ç¼“å­˜-å‡çº§ä¸­
11. å¸ƒéš†è¿‡æ»¤å™¨-å¯å‡çº§